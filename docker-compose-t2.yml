---
# yamllint disable rule:line-length
## Line length rules do not make sense for this file. Comments have still
## been limited to 80 character line length whenever possible.

############################## NETWORKS
## There is no need to create any networks outside this docker-compose file.
## You may customize the network subnets (192.168.90.0/24, 91.0/24, 250.0/24)
## below as you please.
## Docker Compose version 3.5 or higher required to define networks this way.
##
## Note: to enable IPv6 on the bridge network, follow the steps at
## https://docs.docker.com/config/daemon/ipv6/#use-ipv6-for-the-default-bridge-network

networks:
  t2_proxy:
    name: t2_proxy
    driver: bridge
    enable_ipv6: true
    ipam:
      config:
        - subnet: $T2_PROXY_SUBNET
          gateway: $T2_PROXY_GATEWAY
        - subnet: $T2_PROXY_IPV6_SUBNET
  socket_proxy:
    name: socket_proxy
    driver: bridge
    enable_ipv6: true
    ipam:
      config:
        - subnet: $SOCKET_PROXY_SUBNET
          gateway: $SOCKET_PROXY_GATEWAY
        - subnet: $SOCKET_PROXY_IPV6_SUBNET
  gluetun_net:
    name: gluetun_net
    driver: bridge
    enable_ipv6: true
    ipam:
      config:
        - subnet: $GLUETUN_SUBNET
          gateway: $GLUETUN_GATEWAY
        - subnet: $GLUETUN_IPV6_SUBNET
  default:
    driver: bridge

############################## SECRETS
secrets:
  authelia_duo_api_secret_key:
    file: $SECRETSDIR/authelia_duo_api_secret_key
  authelia_identity_validation_reset_password_jwt_secret_file: # https://www.grc.com/passwords.htm
    file: $SECRETSDIR/authelia_identity_validation_reset_password_jwt_secret_file
  authelia_notifier_smtp_password:
    file: $SECRETSDIR/authelia_notifier_smtp_password
  authelia_session_redis_password:
    file: $SECRETSDIR/authelia_session_redis_password
  authelia_session_secret:
    file: $SECRETSDIR/authelia_session_secret
  authelia_storage_encryption_key:
    file: $SECRETSDIR/authelia_storage_encryption_key
  authelia_storage_mysql_password:
    file: $SECRETSDIR/authelia_storage_mysql_password
  authentik_email__password:
    file: $SECRETSDIR/authentik_email__password
  authentik_postgresql__name:
    file: $SECRETSDIR/authentik_postgresql__name
  authentik_postgresql__user:
    file: $SECRETSDIR/authentik_postgresql__user
  authentik_postgresql__password:
    file: $SECRETSDIR/authentik_postgresql__password
  authentik_redis__password:
    file: $SECRETSDIR/authentik_redis__password
  authentik_secret_key:
    file: $SECRETSDIR/authentik_secret_key
  authentik_token_ldap:
    file: $SECRETSDIR/authentik_token_ldap
  cloudflare_api_key:
    file: $SECRETSDIR/cloudflare_api_key
  cloudflare_ddns_api_token: # Currently unsupported
    file: $SECRETSDIR/cloudflare_ddns_api_token
  cloudflare_email:
    file: $SECRETSDIR/cloudflare_email
  firefly_iii_access_token:
    file: $SECRETSDIR/firefly_iii_access_token
  firefly_mail_server_password:
    file: $SECRETSDIR/firefly_mail_server_password
  firefly_mysql_db_name:
    file: $SECRETSDIR/firefly_mysql_db_name
  firefly_mysql_user:
    file: $SECRETSDIR/firefly_mysql_user
  firefly_mysql_password:
    file: $SECRETSDIR/firefly_mysql_password
  gluetun_openvpn_user:
    file: $SECRETSDIR/gluetun_openvpn_user
  gluetun_openvpn_password:
    file: $SECRETSDIR/gluetun_openvpn_password
  gotify_database_connection:
    file: $SECRETSDIR/gotify_database_connection
  gotify_defaultuser_name:
    file: $SECRETSDIR/gotify_defaultuser_name
  gotify_defaultuser_pass:
    file: $SECRETSDIR/gotify_defaultuser_pass
  guac_db_name:
    file: $SECRETSDIR/guac_db_name
  guac_mysql_user:
    file: $SECRETSDIR/guac_mysql_user
  guac_mysql_password:
    file: $SECRETSDIR/guac_mysql_password
  htpasswd:
    file: $SECRETSDIR/htpasswd
  keycloak_admin:
    file: $SECRETSDIR/keycloak_admin
  keycloak_admin_password:
    file: $SECRETSDIR/keycloak_admin_password
  kc_db_username:
    file: $SECRETSDIR/kc_db_username
  kc_db_password:
    file: $SECRETSDIR/kc_db_password
  mysql_root_password:
    file: $SECRETSDIR/mysql_root_password
  nextcloud_admin_user:
    file: $SECRETSDIR/nextcloud_admin_user
  nextcloud_admin_password:
    file: $SECRETSDIR/nextcloud_admin_password
  nextcloud_mysql_user:
    file: $SECRETSDIR/nextcloud_mysql_user
  nextcloud_mysql_password:
    file: $SECRETSDIR/nextcloud_mysql_password
  nextcloud_smtp_name: # Currently unsupported
    file: $SECRETSDIR/nextcloud_smtp_name
  nextcloud_smtp_password: # Currently unsupported
    file: $SECRETSDIR/nextcloud_smtp_password
  plex_claim:
    file: $SECRETSDIR/plex_claim
  postgres_user:
    file: $SECRETSDIR/postgres_user
  postgres_password:
    file: $SECRETSDIR/postgres_password
  qbittorrent_user:
    file: $SECRETSDIR/qbittorrent_user
  qbittorrent_pass:
    file: $SECRETSDIR/qbittorrent_pass
  redis_password:
    file: $SECRETSDIR/redis_password
  vaultwarden_admin_token:
    file: $SECRETSDIR/vaultwarden_admin_token
  vaultwarden_duo_host:
    file: $SECRETSDIR/vaultwarden_duo_host
  vaultwarden_duo_ikey:
    file: $SECRETSDIR/vaultwarden_duo_ikey
  vaultwarden_duo_skey:
    file: $SECRETSDIR/vaultwarden_duo_skey
  vaultwarden_mysql_url:
    file: $SECRETSDIR/vaultwarden_mysql_url
  vaultwarden_smtp_password:
    file: $SECRETSDIR/vaultwarden_smtp_password
  vaultwarden_yubico_client_id:
    file: $SECRETSDIR/vaultwarden_yubico_client_id
  vaultwarden_yubico_secret_key:
    file: $SECRETSDIR/vaultwarden_yubico_secret_key
  vscode_password:
    file: $SECRETSDIR/vscode_password
  vscode_sudo_password:
    file: $SECRETSDIR/vscode_sudo_password
  watchtower_notification_email_server_password:
    file: $SECRETSDIR/watchtower_notification_email_server_password

include:
  ############################## SERVICES
  ## Frontends
  - compose/traefik.yml
  - compose/socket-proxy.yml
  - compose/heimdall.yml
  # - compose/organizr.yml
  ## Security
  - compose/authelia.yml
  # - compose/keycloak.yml
  - compose/authentik.yml
  ## Databases
  - compose/mariadb.yml
  - compose/postgres.yml
  - compose/phpmyadmin.yml
  - compose/adminer.yml
  - compose/redis.yml
  - compose/rediscommander.yml
  ## Media server
  ### Downloads
  - compose/qbit.yml
  - compose/qbit-private.yml
  - compose/qbit-temp.yml
  ### Indexers
  - compose/prowlarr.yml
  # - compose/flaresolverr.yml
  ### Monitoring
  - compose/tautulli.yml
  ### Personal media recorders
  - compose/radarr.yml
  - compose/radarr-4k.yml
  - compose/sonarr.yml
  - compose/sonarr-4k.yml
  - compose/bazarr.yml
  - compose/recyclarr.yml
  - compose/maintainerr.yml
  - compose/audiobookshelf.yml
  - compose/calibre.yml
  - compose/calibre-web.yml
  - compose/lidarr.yml
  ### Requests
  - compose/overseerr.yml
  - compose/ombi.yml
  ### Servers
  - compose/jellyfin.yml
  ## Moved plex to Synology hosted (Intel QuickSync)
  # - compose/plex.yml
  ## Services
  - compose/cf-ddns.yml
  - compose/duckdns.yml
  - compose/docker-gc.yml
  - compose/watchtower.yml
  - compose/vscode.yml
  - compose/filebrowser.yml
  - compose/guacamole.yml
  - compose/dozzle.yml
  - compose/glances.yml
  - compose/dupeguru.yml
  - compose/tdarr.yml
  - compose/tdarr-node.yml
  - compose/handbrake.yml
  - compose/gotify.yml
  ## Web
  - compose/vaultwarden.yml
  - compose/nextcloud.yml
  - compose/firefly.yml
  # - compose/portfolio.yml
  - whoami.yml
  ## VPN
  - compose/wireguard.yml
  - compose/gluetun.yml
  - compose/gluetun-private.yml
  - compose/gluetun-temp.yml
  ## Network services
  # - compose/pi-hole.yml
  - compose/unbound.yml
  - compose/ntp.yml
  ## Minecraft
  # - compose/minecraft.yml
  # - compoase/mc-backup.yml
  # - compose/minecraft-rcon.yml
  ## Miscellaneous
  # - compose/bluebubbles.yml
  - compose/newrelic-infra.yml
