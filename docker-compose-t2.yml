---
# yamllint disable rule:line-length
## Line length rules do not make sense for this file. Comments have still
## been limited to 80 character line length whenever possible.

############################## NETWORKS
## There is no need to create any networks outside this docker-compose file.
## You may customize the network subnets (192.168.90.0/24, 91.0/24, 250.0/24)
## below as you please.
## Docker Compose version 3.5 or higher required to define networks this way.
##
## Note: to enable IPv6 on the bridge network, follow the steps at
## https://docs.docker.com/config/daemon/ipv6/#use-ipv6-for-the-default-bridge-network

networks:
  t2_proxy:
    name: t2_proxy
    driver: bridge
    enable_ipv6: true
    ipam:
      config:
        - subnet: $T2_PROXY_SUBNET
          gateway: $T2_PROXY_GATEWAY
        - subnet: $T2_PROXY_IPV6_SUBNET
  socket_proxy:
    name: socket_proxy
    driver: bridge
    enable_ipv6: true
    ipam:
      config:
        - subnet: $SOCKET_PROXY_SUBNET
          gateway: $SOCKET_PROXY_GATEWAY
        - subnet: $SOCKET_PROXY_IPV6_SUBNET
  gluetun_net:
    name: gluetun_net
    driver: bridge
    enable_ipv6: true
    ipam:
      config:
        - subnet: $GLUETUN_SUBNET
          gateway: $GLUETUN_GATEWAY
        - subnet: $GLUETUN_IPV6_SUBNET
  default:
    driver: bridge

############################## SECRETS
secrets:
  cloudflare_api_key:
    file: $SECRETSDIR/cloudflare_api_key
  cloudflare_ddns_api_token: # Currently unsupported
    file: $SECRETSDIR/cloudflare_ddns_api_token
  cloudflare_email:
    file: $SECRETSDIR/cloudflare_email
  htpasswd:
    file: $SECRETSDIR/htpasswd
  mysql_root_password:
    file: $SECRETSDIR/mysql_root_password
  postgres_user:
    file: $SECRETSDIR/postgres_user
  postgres_password:
    file: $SECRETSDIR/postgres_password
  qbittorrent_user:
    file: $SECRETSDIR/qbittorrent_user
  qbittorrent_pass:
    file: $SECRETSDIR/qbittorrent_pass
  redis_password:
    file: $SECRETSDIR/redis_password
  vaultwarden_admin_token:
    file: $SECRETSDIR/vaultwarden_admin_token
  vaultwarden_duo_host:
    file: $SECRETSDIR/vaultwarden_duo_host
  vaultwarden_duo_ikey:
    file: $SECRETSDIR/vaultwarden_duo_ikey
  vaultwarden_duo_skey:
    file: $SECRETSDIR/vaultwarden_duo_skey
  vaultwarden_mysql_url:
    file: $SECRETSDIR/vaultwarden_mysql_url
  vaultwarden_smtp_password:
    file: $SECRETSDIR/vaultwarden_smtp_password
  vaultwarden_yubico_client_id:
    file: $SECRETSDIR/vaultwarden_yubico_client_id
  vaultwarden_yubico_secret_key:
    file: $SECRETSDIR/vaultwarden_yubico_secret_key
  vscode_password:
    file: $SECRETSDIR/vscode_password
  vscode_sudo_password:
    file: $SECRETSDIR/vscode_sudo_password
  watchtower_notification_email_server_password:
    file: $SECRETSDIR/watchtower_notification_email_server_password

include:
  ############################## SERVICES
  ## Frontends
  - compose/traefik.yml
  - compose/socket-proxy.yml
  - compose/heimdall.yml
  # - compose/organizr.yml
  ## Security
  - compose/authelia.yml
  # - compose/keycloak.yml
  - compose/authentik.yml
  ## Databases
  - compose/mariadb.yml
  - compose/postgres.yml
  - compose/phpmyadmin.yml
  - compose/adminer.yml
  - compose/redis.yml
  - compose/rediscommander.yml
  ## Media server
  ### Downloads
  - compose/qbit.yml
  - compose/qbit-private.yml
  - compose/qbit-temp.yml
  ### Indexers
  - compose/prowlarr.yml
  # - compose/flaresolverr.yml
  ### Monitoring
  - compose/tautulli.yml
  ### Personal media recorders
  - compose/radarr.yml
  - compose/radarr-4k.yml
  - compose/sonarr.yml
  - compose/sonarr-4k.yml
  - compose/bazarr.yml
  - compose/recyclarr.yml
  - compose/maintainerr.yml
  - compose/audiobookshelf.yml
  - compose/calibre.yml
  - compose/calibre-web.yml
  - compose/lidarr.yml
  ### Requests
  - compose/overseerr.yml
  - compose/ombi.yml
  ### Servers
  - compose/jellyfin.yml
  ## Moved plex to Synology hosted (Intel QuickSync)
  # - compose/plex.yml
  ## Services
  - compose/cf-ddns.yml
  - compose/duckdns.yml
  - compose/docker-gc.yml
  - compose/watchtower.yml
  - compose/vscode.yml
  - compose/filebrowser.yml
  - compose/guacamole.yml
  - compose/dozzle.yml
  - compose/glances.yml
  - compose/dupeguru.yml
  - compose/tdarr.yml
  - compose/tdarr-node.yml
  - compose/handbrake.yml
  - compose/gotify.yml
  ## Web
  - compose/vaultwarden.yml
  - compose/nextcloud.yml
  - compose/firefly.yml
  # - compose/portfolio.yml
  - whoami.yml
  ## VPN
  - compose/wireguard.yml
  - compose/gluetun.yml
  - compose/gluetun-private.yml
  - compose/gluetun-temp.yml
  ## Network services
  # - compose/pi-hole.yml
  - compose/unbound.yml
  - compose/ntp.yml
  ## Minecraft
  # - compose/minecraft.yml
  # - compoase/mc-backup.yml
  # - compose/minecraft-rcon.yml
  ## Miscellaneous
  # - compose/bluebubbles.yml
  - compose/newrelic-infra.yml
